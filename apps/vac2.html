<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" id="name">
    <input type="number" placeholder="age" id="age">
    <button onclick="Register()">Register</button>
</body>
</html>
<script>
    let queue = ["hari","ritika","sanjana","keerthi"]
    function Register(){
        let name = document.getElementById("name").value
        let age = document.getElementById("age").value
        if(age > 60){
             queue.unshift(name)
         }else{ 
            queue.push(name)
         }
         let message =  `${name} Your registration is succesfull! now go stand in line`
         alert(message)
         //console.log(queue);

         let mypromise = new Promise(function(resolve,reject){
            
          let inte =  setInterval(function() {
                if(queue[0]===name){
                 resolve(`${name} its your turn now`)
                 clearInterval(inte)
             }
                
            },1000);

        })

         mypromise.then(function(res){
             alert(res)
         })
    }
    function Startvaccine(){
        let vaccinecount = 5;
         while(queue.shift()){
            console.log(queue);
            console.log(vaccinecount);
            if(vaccinecount==1){
                alert("Vaccine out of stock visit tomoorow")
                console.log(queue.length);
            }
          vaccinecount--;
          //console.log(queue.length);
         }
         
         if(queue.length === 0){
             clearInterval(interval)
         }
         
         
    }
    //Startvaccine()
     let interval = setInterval(Startvaccine,10000);
</script>